@use "../../assets/scss/variables" as vars;
@use "../../assets/scss/mixins" as *;
@use "sass:map";

.questions {
  user-select: none;
  padding: var(--padding-vert) 0 0;
  background-color: var(--White, #fff);

  @media (min-width: 481px) and (max-width: 1024px) {
    padding: 60px 0 0;
  }

  @media (max-width: 480px) {
    padding: 14px 0 0;
  }

  .container-questions {
    @include flex-container(flex, column, nowrap, unset, flex-start, 0);
  }

  .questions-header {
    @include flex-container(flex, column, nowrap, unset, flex-start, 50px);
    width: 100%;
    padding: 0 var(--padding-horiz) var(--padding-vert);

    @media (min-width: 481px) and (max-width: 1024px) {
      padding: 0 var(--padding-horiz-tablet) 25px var(--padding-horiz-tablet);
      gap: 32px;
    }

    @media (max-width: 480px) {
      padding: 0 var(--padding-horiz-mobile) 24px var(--padding-horiz-mobile);
      gap: 24px;
    }

    .questions-header-top {
      @include flex-container(flex, row, nowrap, space-between, center, 0);
      width: 100%;

      @media (max-width: 480px) {
        a {
          display: none;
        }
      }
    }

    .questions-header-bottom {
      max-width: var(--paragraf-with, 1325px);

      a {
        color: var(--Main-color, #593dff);
        @include responsive-typography(
          vars.$h3,
          vars.$h4-tablet,
          vars.$h4-mobile
        );
        text-decoration: underline;

        &:hover {
          color: rgba(#593dff, 0.8);
        }
      }

      .read-more {
        color: var(--Main-color, #593dff);
        text-decoration-line: underline;

        &:hover {
          text-decoration: unset;
        }
      }
    }
  }

  .questions-body {
    background-color: rgba(var(--Main-color-rgb), 0.05);

    .container-questions-cards {
      padding: var(--padding-vert) 147px 80px 270px;
      width: 100%;

      @media (min-width: 481px) and (max-width: 1024px) {
        padding: 15px var(--padding-horiz-tablet) 60px
          var(--padding-horiz-tablet);
        gap: 15px;
      }

      @media (max-width: 480px) {
        padding: 24px var(--padding-horiz-mobile) 34px
          var(--padding-horiz-mobile);
        gap: 12px;
      }

      /* ========== FAQ Accordion ========== */
      .faq-accordion {
        .faq-list {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-direction: column;
          gap: 15px;
        }

        .faq-item {
          background-color: var(--White, #fff);
          border-radius: var(--border-radius);
          box-shadow: -25px 20px 88px 0 rgba(var(--Main-color-rgb), 0.25);
          overflow: hidden;
        }

        .faq-label {
          @include flex-container(flex, row, nowrap, space-between, center, 0);
          padding: 20px 30px 18px;
          cursor: pointer;
          @include responsive-typography(
            vars.$h3,
            vars.$h3-tablet,
            vars.$h3-mobile
          );
          background-color: var(--White, #fff);
          transition: background-color 0.3s ease, color 0.3s ease;

          @media (min-width: 481px) and (max-width: 1024px) {
            padding: 20px 35px 24px 30px;
          }

          @media (max-width: 480px) {
            padding: 12px 25px;
          }

          .faq-question-text {
            @media (max-width: 480px) {
              max-width: 183px;
            }
          }

          .faq-icon {
            @include flex-center(row, center, center);
            width: 25px;
            height: 25px;
            transition: transform 0.3s ease;

            @media (max-width: 480px) {
              width: 20px;
              height: 20px;
            }

            svg path {
              fill: var(--Main-color, #593dff);
              transition: fill 0.3s ease;
            }
          }
        }

        /* Скрытый блок — только max-height */
        .faq-answer-list {
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.4s ease;
        }

        /* Контент — с padding всегда */
        .faq-answer-content {
          padding: 0 190px 45px 30px; /* Всегда есть */
          background-color: var(--Main-color, #593dff);
          color: var(--White, #fff);
          border-radius: 0 0 var(--border-radius) var(--border-radius);
          opacity: 0;
          transition: opacity 0.3s ease;

          @media (min-width: 481px) and (max-width: 1024px) {
            padding: 0 35px 24px 35px;
          }

          @media (max-width: 480px) {
            padding: 0 15px 24px 25px;
          }

          & p {
            margin: 0;
            @include responsive-typography(
              vars.$h4,
              vars.$h4-tablet,
              vars.$h5-mobile
            );
          }
        }

        /* Открытый элемент */
        .faq-item.is-open {
          .faq-label {
            background-color: var(--Main-color, #593dff);
            color: var(--White, #fff);
            border-radius: var(--border-radius) var(--border-radius) 0 0;

            .icon-line {
              &.horizontal {
                fill: white;
              }
              &.vertical {
                opacity: 0;
                transform: scaleY(0);
              }
            }

            .faq-icon {
              transform: rotate(180deg);
            }
          }

          .faq-answer-content {
            opacity: 1;
          }
        }
      }
    }

    .questions__bottom-btn {
      display: none;

      @media (max-width: 480px) {
        width: 100%;
        @include flex-center(row, center, center);
        margin-top: 24px;
      }
    }
  }
}
